(function(){function y(n,t){var i;if((i=window===null||window===void 0?void 0:window.navigator)===null||i===void 0?void 0:i.sendBeacon){var r=(new Date).getTime(),u="<E><T>Event.ClientInst<\/T><IG>".concat(_G.IG,"<\/IG><TS>").concat(r,'<\/TS><D><![CDATA[{T:"CI.AutoSearch",FID:"CI",Name:"').concat(n,'",Text:"').concat(t,'"}]\]><\/D><\/E>'),f="<ClientInstRequest><Events>".concat(u,"<\/Events><STS>").concat(r,"<\/STS><\/ClientInstRequest>");_G.DirectLogPost!=null?_w.directLogPost("Event.ClientInst",_G.IG,r,'{T:"CI.AutoSearch",FID:"CI",Name:"'.concat(n,'",Text:"').concat(t,'"}'),1,window.navigator.sendBeacon):window.navigator.sendBeacon("/fd/ls/lsp.aspx?",f)}}function p(n,t){return n.trim().toLowerCase()===t.trim().toLowerCase()}function w(n){return(n===null||n===void 0?void 0:n.value)||""}function d(){var n=new URL(_w.location.href);return n.searchParams.get("q")||""}function n(){e&&clearTimeout(e)}function g(n){var t=w(n);return window.SBoxAutoSearchQList&&window.SBoxAutoSearchQList.some(function(n){return p(n,t)})}function c(i){n();e=setTimeout(function(){var n,u,r;if(t)try{if(n=w(i),u=d(),!n||p(n,u)||!g(i))return;if(r=_d.querySelector(".b_searchboxForm .ghost"),r===null||r===void 0?void 0:r.innerText)return;nt(n)}catch(f){_w.sj_log&&sj_log("CI.AutoSearch","error",f.message)}},a)}function nt(n){(y("trigger","autoSearch"),sj_log("CI.AutoSearchV2","AutoSearch_Triggered",n),Log&&Log.LogFilterFlare&&Log.LogFilterFlare(["AutoSearchTriggered"]),v)||sj_evt.fire("autoTriggerNav",{form:"AUTOSE"})}function b(){var n=_d.getElementById(k),t;n&&((t=sj_cook.get("SRCHHPGUSR","AS")!=="0",t)||(h||tt(),it(n),rt(),h&&et()&&ft(n)))}function tt(){_d.addEventListener("mousemove",function(){t&&(u=(new Date).getTime(),n())});_d.addEventListener("touchstart",function(){t&&(u=(new Date).getTime(),n())})}function it(e){e.addEventListener("focus",function(){t=!0;l=r=o=s=u=(new Date).getTime();_w.sj_log&&sj_log("CI.AutoSearch","focus","searchBoxFocused")});e.addEventListener("blur",function(){t=i=!1;n();f&&setTimeout(function(){f=!1},500)});e.addEventListener("input",function(t){var u=t;switch(u.inputType){case"insertText":if(r=(new Date).getTime(),i)break;c(e);break;case"insertFromPaste":if(o=(new Date).getTime(),i)break;_w.sj_log&&sj_log("CI.AutoSearch","paste",u.data||"");c(e);break;case"deleteContentForward":case"deleteContentBackward":s=(new Date).getTime();n()}});e.addEventListener("compositionstart",function(){i=!0;n()});e.addEventListener("compositionend",function(){i=!1;r=(new Date).getTime();c(e)})}function rt(){sj_evt.bind("AS.Navigate",function(){var n=(new Date).getTime();y("search","IsReformulation: ".concat(f,", RequerySpeed: ").concat(n-l,",TypingSpeed: ").concat(n-r,",PasteSpeed: ").concat(n-o,",DeleteSpeed: ").concat(n-s,",MouseMovingSpeed: ").concat(n-u))})}function ut(){h=!0;b()}function ft(n){n.focus();var t=n.value.length;n===null||n===void 0?void 0:n.setSelectionRange(t,t)}function et(){var n=new URLSearchParams(window.location.search);return n.get("form")==="AUTOSE"}var k="sb_form_q",t=!1,i=!1,f=!1,e,l=0,r=0,o=0,s=0,u=0,a=0,v=!1,h=!1;sj_evt.bind("searchBoxAutoSearchInit",function(n){var t=n[1],i=t.delayTime,r=t.isControl;a=i;v=r;b();sj_evt.bind("ajax.postload",ut)},!0)})()